// This code was generated by Heta compiler, see https://hetalang.github.io
{#-
    this.exportStorage = new Map();
    this.unitDefStorage = new Map();
    this.namespaceStorage = new Map();
-#}
{%- macro dict(component={}) %}
  {{- ' {' }}
  {{- ' units: ' + component.units + ',' if component.units is defined }}
  {{- ' boundary: ' + component.boundary + ',' if component.boundary is defined }}
  {{- ' compartment: ' + component.compartment + ',' if component.compartment is defined }}
  {{- ' actors: ' + component.actors + ',' if component.actors.length > 0 }}
  {{- ' modifiers: ' + hetaArray(component.modifiers) + ',' if component.modifiers.length > 0 }}
  {{- ' isAmount: ' + component.isAmount + ',' if component.isAmount is defined }}
  {{- ' output: ' + component.output + ',' if component.output is defined }}
  {{- ' slope: ' + component.slope + ',' if component.slope is defined and component.slope !== 1 }}
  {{- ' intercept: ' + component.intercept + ',' if component.intercept is defined and component.intercept !== 0 }}
  {{- ' }' }}
{%- endmacro -%}
{%- macro notes(component={}) %}
  {{- '\n  \'\'\'' + component.notes + '\'\'\'' if component.notes is defined }}
{%- endmacro %}
{%- macro start_(component={}) %}
  {{- ' .= ' + component.assignments.start_ if component.assignments.start_ is defined -}}
{%- endmacro %}
{%- macro ode_(component={}) %}
  {{- ' := ' + component.assignments.ode_ if component.assignments.ode_ is defined -}}
{%- endmacro %}
{%- macro num(component={}) %}
  {{- ' = ' + component.num if component.num is defined -}}
{%- endmacro %}
{%- macro class(component={}) %}
  {{- ' @' + component.className }}
{%- endmacro %}
{%- macro title(component={}) %}
  {{- ' \'' + component.title + '\'' if component.title is defined }}
{%- endmacro %}
{%- macro hetaArray(array=[]) -%}
  [{{ array.join(', ') }}]
{%- endmacro %}

{%- for spaceId, namespace in namespaceStorage.entries() %}

{{ 'abstract ' if namespace.isAbstract }}namespace {{ spaceId }} begin

{%- for component in namespace.selectByClassName('TimeScale') %}
  {{- notes(component) }}
  {{ component.id }}
  {{- class(component) }}
  {{- title(component) }}
  {{- dict(component) }}
  {{- ';' }}
{%- endfor %}

{%- for component in namespace.selectByClassName('Compartment') %}
  {{- notes(component) }}
  {{ component.id }}
  {{- class(component) }}
  {{- title(component) }}
  {{- dict(component) }}
  {{- start_(component) }}
  {{- ode_(component) }}
  {{- ';' }}
{%- endfor %}

{%- for component in namespace.selectByClassName('Species') %}
  {{- notes(component) }}
  {{ component.id }}
  {{- class(component) }}
  {{- title(component) }}
  {{- dict(component) }}
  {{- start_(component) }}
  {{- ode_(component) }}
  {{- ';' }}
{%- endfor %}

{%- for component in namespace.selectByInstanceOf('Process') %}
  {{- notes(component) }}
  {{ component.id }}
  {{- class(component) }}
  {{- title(component) }}
  {{- dict(component.toQ({simplifyModifiers: true, simplifyActors: true})) }}
  {{- start_(component) }}
  {{- ode_(component) }}
  {{- ';' -}}
{%- endfor %}

{%- for component in namespace.selectByClassName('Record') %}
  {{- notes(component) }}
  {{ component.id }}
  {{- class(component) }}
  {{- title(component) }}
  {{- dict(component) }}
  {{- start_(component) }}
  {{- ode_(component) }}
  {{- ';' -}}
{%- endfor %}

{%- for component in namespace.selectByClassName('Const') %}
  {{- notes(component) }}
  {{ component.id }}
  {{- class(component) }}
  {{- title(component) }}
  {{- dict(component) }}
  {{- num(component) }}
  {{- ';' -}}
{%- endfor %}
end
{%- endfor %}
